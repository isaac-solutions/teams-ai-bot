# Environment variables template for Dropbox File Processing Worker
# Copy this file to .env and fill in your actual values

# ============================================================================
# MongoDB Configuration (Required)
# ============================================================================
# MongoDB connection string for the isaac-dropbox database
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/?retryWrites=true&w=majority
MONGODB_DATABASE=isaac-dropbox

# ============================================================================
# Azure Service Bus Configuration (Required)
# ============================================================================
# Service Bus connection string for queue messaging
SERVICE_BUS_CONNECTION_STRING=Endpoint=sb://your-namespace.servicebus.windows.net/;SharedAccessKeyName=RootManageSharedAccessKey;SharedAccessKey=your-key
SERVICE_BUS_QUEUE_NAME=dropbox-file-processing

# ============================================================================
# Azure Blob Storage Configuration (Required)
# ============================================================================
# Blob storage connection string for file storage
BLOB_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=youraccount;AccountKey=yourkey;EndpointSuffix=core.windows.net
BLOB_CONTAINER_NAME=pptx

# ============================================================================
# Azure OpenAI Configuration (Required)
# ============================================================================
# Azure OpenAI API key
OPENAI_API_KEY=your-azure-openai-key

# Azure OpenAI endpoint
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/

# Azure OpenAI API version
AZURE_OPENAI_API_VERSION=2023-05-15

# Azure OpenAI deployment name for embeddings
# This is the deployment name you created in Azure OpenAI Studio
OPENAI_EMBEDDING_MODEL=text-embedding-3-large

# ============================================================================
# Worker Configuration (Optional)
# ============================================================================
# Maximum number of delivery attempts before dead-lettering
MAX_RECEIVE_COUNT=3

# Maximum wait time for queue messages in seconds
MAX_WAIT_TIME=60

# Maximum number of retries for failed operations
MAX_RETRIES=3

# Base delay for exponential backoff (in seconds)
RETRY_DELAY_BASE=2.0

# Temporary directory for file processing
TEMP_DIR=/tmp/dropbox-worker

# ============================================================================
# Logging Configuration (Optional)
# ============================================================================
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# ============================================================================
# Chunking Configuration (Optional)
# ============================================================================
# Chunk size in tokens
CHUNK_SIZE=512

# Chunk overlap in tokens
CHUNK_OVERLAP=50

# ============================================================================
# Notes
# ============================================================================
# - All "Required" variables must be set for the worker to function
# - "Optional" variables have sensible defaults
# - Never commit this file with real credentials to version control
# - Use Azure Key Vault for production deployments
# - The OPENAI_EMBEDDING_MODEL should match your Azure OpenAI deployment name
# - The BLOB_CONTAINER_NAME can be reused from existing infrastructure

